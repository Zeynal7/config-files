# ============================================
# PREFIX
# ============================================
# Change prefix from Ctrl-b to Option-a (easier to reach)
set -g prefix M-a
unbind C-b
# Allow sending Option-a to programs inside tmux by pressing it twice
bind M-a send-prefix



# ============================================
# GENERAL
# ============================================
# Enable mouse for scrolling, resizing panes, and clicking windows
set -g mouse on
# Increase scrollback buffer (default is 2000)
set -g history-limit 5000
# Start numbering windows from 1 instead of 0
set -g base-index 1
# Start numbering panes from 1 instead of 0
setw -g pane-base-index 1
# No delay after pressing Escape (useful for Vim/Neovim)
set -sg escape-time 0

# ============================================
# WINDOWS
# ============================================
# Ctrl-a n â†’ create a new window (same directory)
bind n new-window -c "#{pane_current_path}"
# Ctrl-a a â†’ list all windows in current session
bind a choose-tree -w
# Ctrl-a t â†’ rename current window
bind t command-prompt -I "#W" "rename-window '%%'"
# Option-a - â†’ kill current window
bind - kill-window

# ============================================
# SESSIONS
# ============================================
# Ctrl-a s â†’ list all sessions
bind s choose-tree -s
# Ctrl-a Shift-s â†’ create a new session
bind S new-session
# Ctrl-a Shift-t â†’ rename current session
bind T command-prompt -I "#S" "rename-session '%%'"
# Option-a _ â†’ kill current session
bind _ kill-session

# ============================================
# PANES
# ============================================
# Navigate panes with prefix + arrow keys
bind Left select-pane -L
bind Right select-pane -R
bind Down select-pane -D
bind Up select-pane -U

# Create panes with prefix + Shift-arrow keys (same directory)
bind S-Left split-window -hb -c "#{pane_current_path}"
bind S-Right split-window -h -c "#{pane_current_path}"
bind S-Down split-window -v -c "#{pane_current_path}"
bind S-Up split-window -vb -c "#{pane_current_path}"

# Quick edit config
bind e new-window -n "config" "nano ~/.tmux.conf && tmux source-file ~/.tmux.conf && tmux display 'Reloaded'"

# ============================================
# RELOAD
# ============================================
# Ctrl-a r â†’ reload this config file and show confirmation
bind r source-file ~/.tmux.conf \; display "Reloaded"

# ============================================
# STATUS BAR
# ============================================
# Dark background with light text
set -g status-style 'bg=#282828 fg=#ebdbb2'
# Left side: session name in green badge
set -g status-left '#[fg=#282828,bg=#98971a,bold] #S #[default] '
set -g status-left-length 30
set -g status-right-length 120
# Right side: git branch, current folder, battery %, time and date
set -g status-right '#[fg=#b8bb26]#{?#(git -C "#{pane_current_path}" rev-parse --abbrev-ref HEAD 2>/dev/null), âŽ‡ #(git -C "#{pane_current_path}" rev-parse --abbrev-ref HEAD 2>/dev/null),} #[fg=#83a598]ðŸ“‚ #{b:pane_current_path} #[fg=#d3869b]âš¡#(pmset -g batt | grep -Eo "\d+%%" | head -1) #[fg=#282828,bg=#ebdbb2,bold] %H:%M %d-%b '
# Refresh status bar every 5 seconds
set -g status-interval 5

# ============================================
# WINDOW TABS
# ============================================
# Inactive windows: plain style
setw -g window-status-format ' #I:#W '
# Active window: highlighted with blue background
setw -g window-status-current-format '#[fg=#282828,bg=#83a598,bold] #I:#W '
